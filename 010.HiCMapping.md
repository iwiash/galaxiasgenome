```
module load BWA SAMtools picard
```

Parameters file (executed in ~/nobackup/source_files/hic/mapping/)
```
#!/bin/bash

SRA='Fish_HiC_trimmed_R'
LABEL='gb_hic_map'
IN_DIR='./hicdata/'
BWA='/opt/nesi/CS400_centos7_bdw/BWA/0.7.18-GCC-12.3.0/bin/bwa'
SAMTOOLS='/opt/nesi/zen3/SAMtools/1.22-GCC-12.3.0/bin/samtools'
REF='./hicdata/reordered_gb_hic_purged_masked.fa'
FAIDX='$REF.fai'
PREFIX='hicdata/indexed'
RAW_DIR='./raw_outdir/'
FILT_DIR='./filt_outdir/'
FILTER='/path/to/filter_five_end.pl'
COMBINER='/path/to/two_read_bam_combiner.pl'
STATS='/path/to/get_stats.pl'
PICARD='/opt/nesi/CS400_centos7_bdw/picard/2.26.10-Java-11.0.4/picard'
TMP_DIR='~/nobackup/source_files/hic/mapping/temp/'
PAIR_DIR='./paired_outdir/'
REP_DIR='./deduped_outdir/'
REP_LABEL=${LABEL}_rep1
MAPQ_FILTER=10
CPU=12
```
Full paths were giving me grief coz im stupid.

```
chmod +x parameters.sh

. parameters.sh
```

Index genome (again)
```
samtools faidx reordered_gb_hic_purged_masked.fa
```

Create BWA index file:
```
$BWA index -a bwtsw -p $PREFIX $REF
```

Re-trim UMIs (just in case)
```
zcat Bruce_fish_HiC_S1_R1_001.fastq.gz | awk '{ if(NR%2==0) {print substr($1,6)} else {print} }' | gzip > TRIMMED_HiC_R1.fastq.gz

zcat Bruce_fish_HiC_S1_R2_001.fastq.gz | awk '{ if(NR%2==0) {print substr($1,6)} else {print} }' | gzip > TRIMMED_HiC_R2.fastq.gz
```

